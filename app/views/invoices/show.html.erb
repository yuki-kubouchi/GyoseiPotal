<% content_for :title, "請求詳細" %>

<div class="w-full">
  <% if notice.present? %>
    <p class="py-2 px-3 bg-green-50 mb-5 text-green-600 font-medium rounded-md inline-block" id="notice"><%= notice %></p>
  <% end %>

  <div class="mb-6 flex items-center justify-between">
    <h1 class="text-2xl font-bold text-gray-800">請求詳細</h1>
    <div class="flex gap-2">
      <%= link_to "編集", edit_invoice_path(@invoice), class: "rounded-lg px-4 py-2 bg-gray-100 hover:bg-gray-50 text-gray-800" %>
      <%= button_to "削除", @invoice, method: :delete, class: "rounded-lg px-4 py-2 text-white bg-red-600 hover:bg-red-500", data: { turbo_confirm: "削除してよろしいですか？" } %>
      <%= link_to "一覧へ", invoices_path, class: "rounded-lg px-4 py-2 bg-primary-blue text-white hover:bg-blue-700" %>
    </div>
  </div>

  <div class="bg-white rounded-2xl shadow p-6">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <div class="text-sm text-gray-500">顧客</div>
        <div class="mt-1 text-gray-900">
          <% if @invoice.customer %>
            <%= link_to "#{@invoice.customer.code} - #{@invoice.customer.name}", customer_path(@invoice.customer), class: "text-primary-blue hover:underline" %>
          <% else %>
            -
          <% end %>
        </div>
      </div>
      <div>
        <div class="text-sm text-gray-500">申請</div>
        <div class="mt-1 text-gray-900">
          <% if @invoice.application %>
            <%= link_to @invoice.application.title, application_path(@invoice.application), class: "text-primary-blue hover:underline" %>
          <% else %>
            -
          <% end %>
        </div>
      </div>
      <div>
        <div class="text-sm text-gray-500">金額(円)</div>
        <div class="mt-1 text-gray-900 font-medium"><%= number_with_delimiter(@invoice.amount_yen) %></div>
      </div>
      <div>
        <div class="text-sm text-gray-500">発行日</div>
        <div class="mt-1 text-gray-900"><%= @invoice.issued_on %></div>
      </div>
      <div>
        <div class="text-sm text-gray-500">ステータス</div>
        <div class="mt-1">
          <% case @invoice.status
             when "drafted" %>
            <span class="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold bg-gray-100 text-gray-700">下書き</span>
          <% when "issued" %>
            <span class="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold bg-blue-100 text-accent-pending">発行</span>
          <% when "paid" %>
            <span class="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold bg-green-100 text-accent-success">入金</span>
          <% else %>
            <span class="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-700">取消</span>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
